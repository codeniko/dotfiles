# Dotfiles

Cross-platform dotfiles for macOS and Linux (WSL2 Ubuntu). Manages shell configuration, terminal settings, prompt theming, and editor setup.

## Repo Structure

Files are stored without the leading dot and organized by category:

```
dotfiles/
├── shell/
│   ├── zshrc                → ~/.zshrc
│   ├── zsh_plugins.txt      → ~/.zsh_plugins.txt
│   └── bashrc               → ~/.bashrc
├── ghostty/
│   └── config               → ~/.config/ghostty/config
├── starship/
│   └── starship.toml        → ~/.config/starship.toml
├── vim/
│   └── vimrc                → ~/.vimrc
├── git/
│   └── gitconfig            → ~/.gitconfig
├── tmux/
│   └── tmux.conf            → ~/.tmux.conf
├── node/
│   └── npmrc                → ~/.npmrc
├── syncFiles.sh
├── installFiles.sh
└── diffFiles.sh
```

### Scripts

| Script | Description |
|--------|-------------|
| `syncFiles.sh` | Copies config files from the system into this repo |
| `installFiles.sh` | Copies config files from this repo onto the system |
| `diffFiles.sh` | Shows diff between repo files and system files |

All three scripts support `--dry-run` / `-n` to preview without making changes (except `diffFiles.sh` which is read-only).

### Not Tracked (auto-generated or installed at setup time)

- `~/.zsh_plugins.zsh` — auto-generated by Antidote from `zsh_plugins.txt`
- `~/.antidote/` — cloned during Antidote install
- `~/.vim/bundle/` — installed by Vundle when you run `:PluginInstall`
- `~/.config/gh/hosts.yml` — contains auth tokens

## Prerequisites

### macOS

- [Homebrew](https://brew.sh)
- Ghostty installed via Homebrew or direct download

### Linux (WSL2 Ubuntu 24)

```bash
sudo apt update && sudo apt install -y zsh vim git curl fontconfig unzip
```

## Fresh Machine Setup

### 1. Clone this repo

### 2. Install Zsh (Linux only, macOS has it built in)

```bash
sudo apt install -y zsh
chsh -s $(which zsh)
```

Log out and back in for the default shell change to take effect.

### 3. Install Starship prompt

**macOS:**

```bash
brew install starship
```

**Linux:**

```bash
curl -sS https://starship.rs/install.sh | sh
```

### 4. Install Antidote (Zsh plugin manager)

```bash
git clone --depth=1 https://github.com/mattmc3/antidote.git ~/.antidote
```

On first Zsh launch, Antidote reads `zsh_plugins.txt` and clones all plugins automatically.

### 5. Install Hack Nerd Font

**macOS:**

```bash
brew install font-hack-nerd-font
```

**Linux:**

```bash
mkdir -p ~/.local/share/fonts
cd ~/.local/share/fonts
curl -fLO https://github.com/ryanoasis/nerd-fonts/releases/latest/download/Hack.zip
unzip Hack.zip -d Hack
rm Hack.zip
fc-cache -fv
```

### 6. Install Vim + Vundle

Vundle manages Vim plugins defined in `vimrc`.

```bash
git clone https://github.com/VundleVim/Vundle.vim.git ~/.vim/bundle/Vundle.vim
```

Then open Vim and run:

```
:PluginInstall
```

### 7. Install eza and bat

eza is a modern replacement for `ls`. bat is a modern replacement for `cat` with syntax highlighting.

**macOS:**

```bash
brew install eza bat
```

**Linux:**

```bash
sudo apt install -y eza bat
```

Note: On Ubuntu, bat is installed as `batcat` due to a naming conflict. The zshrc already includes `alias bat='batcat'` for Linux.

### 8. Install delta (git pager)

Used by `gitconfig` for syntax-highlighted, side-by-side diffs.

**macOS:**

```bash
brew install git-delta
```

**Linux:**

```bash
sudo apt install -y git-delta
```

## Platform-Specific Notes

The `zshrc` contains some macOS-specific paths (Homebrew at `/opt/homebrew`, Java via `/usr/libexec/java_home`, Android SDK). These should be wrapped in a platform check:

```zsh
if [[ "$(uname)" == "Darwin" ]]; then
    # macOS-specific config
    eval "$(/opt/homebrew/bin/brew shellenv)"
elif [[ "$(uname)" == "Linux" ]]; then
    # Linux/WSL-specific config
fi
```

The Ghostty config sets `command = /bin/zsh`. On Linux, Zsh is typically at `/usr/bin/zsh`. Either update per platform or remove the line to let Ghostty use the default shell.

## Zsh Plugins (via Antidote)

Defined in `shell/zsh_plugins.txt`:

- **zsh-syntax-highlighting** — command syntax coloring as you type
- **zsh-autosuggestions** — fish-like inline suggestions from history
- **zsh-history-substring-search** — search history with up/down arrows
- **zsh-completions** — additional completion definitions
- **ohmyzsh libs** — core Oh-My-Zsh library functions (via `getantidote/use-omz`)

## Vim Plugins (via Vundle)

Defined in `vim/vimrc`:

- **ctrlp.vim** — fuzzy file finder
- **vim-easymotion** — fast cursor movement
- **tagbar** — code structure sidebar
- **vim-tmux-navigator** — seamless tmux/vim split navigation
- **Colorizer** — color code highlighting
- **vim-airline** — status bar (molokai theme)
- **vim-gitgutter** — git diff markers in the gutter
- **vim-fugitive** — git integration
- **nerdtree** — file tree sidebar
- **NrrwRgn** — narrow region editing
- **Recover.vim** — swap file diff recovery

## Updating Plugins

Antidote does **not** auto-update plugins. To update:

```zsh
# Update all Zsh plugins
antidote update

# Update Antidote itself
git -C ~/.antidote pull
```

For Vim plugins, open Vim and run:

```
:PluginUpdate
```
